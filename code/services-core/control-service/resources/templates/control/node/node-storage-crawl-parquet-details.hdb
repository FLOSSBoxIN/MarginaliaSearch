<!doctype html>
<html lang="en-US">
{{> control/partials/head-includes }}
<head><title>Control Service: Node {{node.id}}</title></head>
<body>
{{> control/partials/nav}}

<div class="container">

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/nodes">nodes</a></li>
            <li class="breadcrumb-item">node-{{node.id}}</li>
        </ol>
    </nav>

    {{> control/node/partial-node-nav }}

    <div class="container">
        {{>control/partials/storage-types}}

        <h1>Crawl Parquet Info</h1>

        <h2>Summary</h2>
        <table class="table">
            <tr>
            <th>Domain</th><th>File</th>
            </tr>
            <td>{{domain}}</td>
            <td>
                <a class="btn btn-primary" href="/nodes/{{node.id}}/storage/{{storage.id}}/transfer?path={{{path}}}">Download Parquet</a>
            </td>
            <tr>
                <th>HTTP Status</th>
                <th>Count</th>
            </tr>
            {{#each byStatusCode}}
            <tr>
                <td>{{statusCode}}</td>
                <td>{{count}}</td>
            </tr>
            {{/each}}
            <tr>
                <th>Content Type</th>
                <th>Count</th>
            </tr>
            {{#each byContentType}}
            <tr>
                <td>{{contentType}}</td>
                <td>{{count}}</td>
            </tr>
            {{/each}}
        </table>

        <h2>Contents</h2>
        <table class="table">
            <tr>
            <th>URL</th>
            <th>Content Type</th>
            <th>HTTP Status</th>
            <th>Has Body</th>
            <th>ETag</th>
            <th>Last Modified</th>
            </tr>
            {{#each records}}
            <tr>
                <td>
                    <span style="word-break: break-word; font-family: monospace">{{url}}</span> <a href="{{url}}" rel="noreferrer noopener">[Visit]</a>
                </td>
                <td>{{contentType}}</td>
                {{#if good}}
                    <td class="text-success">{{httpStatus}}</td>
                {{/if}}
                {{#if redirect}}
                    <td class="text-info">{{httpStatus}}</td>
                {{/if}}
                {{#if clientError}}
                    <td class="text-warning">{{httpStatus}}</td>
                {{/if}}
                {{#if serverError}}
                    <td class="text-danger">{{httpStatus}}</td>
                {{/if}}
                {{#if unknownStatus}}
                    <td>{{httpStatus}}</td>
                {{/if}}
                <td>{{#if hasBody}}&check;{{/if}}</td>
                <td style="word-break: break-all; font-family: monospace">{{etag}}</td>
                <td>{{lastModified}}</td>
            </tr>
            {{/each}}

            <tr>
                {{#with pagination}}
                    <td>
                        {{#if prevPage}}
                        <a href="/nodes/{{node.id}}/storage/crawl-parquet-info?fid={{storage.id}}&path={{path}}&page={{prev}}">Previous</a>
                        {{/if}}
                    </td>
                    <td colspan="4"></td>
                    <td>
                        <a href="/nodes/{{node.id}}/storage/crawl-parquet-info?fid={{storage.id}}&path={{path}}&page={{next}}">Next</a>
                    </td>
                {{/with}}
            </tr>
        </table>
    </div>



</div>
</body>
{{> control/partials/foot-includes }}
</html>
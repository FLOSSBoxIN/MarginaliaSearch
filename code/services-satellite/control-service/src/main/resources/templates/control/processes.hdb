<!DOCTYPE html>
<html>
<head>
    <title>Control Service</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
</head>
<body>
  {{> control/partials/nav}}

  <section>
      <h1>Processes</h1>
      <table id="heartbeats">
          <tr>
              <th>Process ID</th>
              <th>UUID</th>
              <th>Status</th>
              <th>Progress</th>
              <th>Last Seen (ms)</th>
          </tr>
          {{#each heartbeats}}
          <tr class="{{#if isMissing}}missing{{/if}}" style="{{progressStyle}}">
              <td>{{processId}}</td>
              <td title="{{uuidFull}}">
                  <span style="background-color: {{uuidColor}}" class="uuidPip">&nbsp;</span><span style="background-color: {{uuidColor2}}" class="uuidPip">&nbsp;</span>
                  {{uuid}}
              </td>
              <td>{{status}}</td>
              <td>{{#if progress}}{{progress}}%{{/if}}</td>
              <td>{{#unless isStopped}}{{lastSeenMillis}}{{/unless}}</td>
          </tr>
          {{/each}}
      </table>
  </section>
</body>
<script src="/refresh.js"></script>
<script>
    window.setInterval(() => {
        refresh(["heartbeats"]);
    }, 2000);
</script>
</html>